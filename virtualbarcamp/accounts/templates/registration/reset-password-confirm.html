{% extends "registration/base.html" %}

{% block main %}
    <h2 class="title">Reset Password</h2>
    {% if valid_link %}
    <form method="POST">
        {% csrf_token %}
        {% for error in form.non_field_errors %}
            <div class="notification is-danger">{{ error }}</div>
        {% endfor %}
        {% include "form_field.html" with label="Old password" field=form.old_password %}
        {% include "form_field.html" with label="New password" field=form.new_password1 %}
        {% include "form_field.html" with label="Repeat new password" field=form.new_password2 %}
        <div class="field">
            <div class="control">
                <button class="button is-success">Change password</button>
                <a href="/" class="button is-text">Cancel</a>
            </div>
        </div>
    </form>
    {% else %}
        <div class="content">
            <p>This link is invalid.</p>
        </div>
        <div class="field">
            <div class="control">
                <a href="/" class="button is-text">Return</a>
            </div>
        </div>
    {% endif %}
{% endblock %}